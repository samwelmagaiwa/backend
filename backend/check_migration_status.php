<?php\n\n/**\n * Check if the required migrations have been run\n */\n\nrequire_once __DIR__ . '/vendor/autoload.php';\n\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Schema;\n\n// Load Laravel application\n$app = require_once __DIR__ . '/bootstrap/app.php';\n$app->make(Illuminate\\Contracts\\Console\\Kernel::class)->bootstrap();\n\necho \"ðŸ” CHECKING MIGRATION STATUS\\n\";\necho \"===========================\\n\\n\";\n\ntry {\n    // Check if user_access table exists\n    if (!Schema::hasTable('user_access')) {\n        echo \"âŒ user_access table does not exist!\\n\";\n        exit(1);\n    }\n    \n    echo \"âœ… user_access table exists\\n\\n\";\n    \n    // Check for required columns\n    $requiredColumns = [\n        'wellsoft_modules',\n        'wellsoft_modules_selected',\n        'jeeva_modules',\n        'jeeva_modules_selected',\n        'module_requested_for'\n    ];\n    \n    echo \"Checking required columns:\\n\";\n    foreach ($requiredColumns as $column) {\n        if (Schema::hasColumn('user_access', $column)) {\n            echo \"âœ… {$column} - EXISTS\\n\";\n        } else {\n            echo \"âŒ {$column} - MISSING\\n\";\n        }\n    }\n    \n    echo \"\\n\";\n    \n    // Get column details\n    echo \"Column details:\\n\";\n    $columns = DB::select(\"SHOW COLUMNS FROM user_access WHERE Field LIKE '%modules%' OR Field = 'module_requested_for'\");\n    foreach ($columns as $column) {\n        echo \"  {$column->Field}: {$column->Type} (Null: {$column->Null}, Default: {$column->Default})\\n\";\n    }\n    \n    echo \"\\n\";\n    \n    // Check migration table\n    echo \"Checking migrations table:\\n\";\n    $migrations = DB::table('migrations')\n        ->where('migration', 'like', '%user_access%')\n        ->orWhere('migration', 'like', '%missing%')\n        ->orWhere('migration', 'like', '%modules%')\n        ->orderBy('batch')\n        ->get();\n    \n    foreach ($migrations as $migration) {\n        echo \"  {$migration->migration} (Batch: {$migration->batch})\\n\";\n    }\n    \n    echo \"\\n\";\n    \n    // Check if the specific migration exists\n    $fixMigration = DB::table('migrations')\n        ->where('migration', '2025_09_18_190949_fix_missing_user_access_columns')\n        ->first();\n    \n    if ($fixMigration) {\n        echo \"âœ… Fix migration has been run (Batch: {$fixMigration->batch})\\n\";\n    } else {\n        echo \"âŒ Fix migration has NOT been run\\n\";\n        echo \"   Run: php artisan migrate\\n\";\n    }\n    \n} catch (Exception $e) {\n    echo \"âŒ Error checking migration status: \" . $e->getMessage() . \"\\n\";\n}\n\n?>\n"